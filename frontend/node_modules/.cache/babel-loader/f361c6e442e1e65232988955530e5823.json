{"ast":null,"code":"import _classCallCheck from\"/Users/Vlad/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/Vlad/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(options){_classCallCheck(this,Api);this._baseUrl=options.baseUrl;this._headers=options.headers;}_createClass(Api,[{key:\"_checkStatus\",value:function _checkStatus(res){if(res.ok){return res.json();}else{return Promise.reject(\"Error: \".concat(res.status));}}},{key:\"getUserInfo\",value:function getUserInfo(){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{debugger:'',method:'GET',headers:this._headers}).then(this._checkStatus);}},{key:\"getInitialCards\",value:function getInitialCards(){var _this=this;return fetch(\"\".concat(this._baseUrl,\"/cards\"),{method:'GET',headers:this._headers}).then(function(res){return _this._checkStatus(res);});}},{key:\"getInitialInfo\",value:function getInitialInfo(){return Promise.all([this.getUserInfo(),this.getInitialCards()]);}},{key:\"setUserInfo\",value:function setUserInfo(data){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:'PATCH',headers:this._headers,body:JSON.stringify({name:data.name,about:data.about})}).then(this._checkStatus);}},{key:\"newUserAvatar\",value:function newUserAvatar(link){return fetch(\"\".concat(this._baseUrl,\"/users/me/avatar\"),{method:'PATCH',headers:this._headers,body:JSON.stringify({avatar:link})}).then(this._checkStatus);}},{key:\"addNewCard\",value:function addNewCard(_ref){var name=_ref.name,link=_ref.link;return fetch(\"\".concat(this._baseUrl,\"/cards\"),{method:'POST',headers:this._headers,body:JSON.stringify({name:name,link:link// name: data.title,\n// link: data.url\n})}).then(this._checkStatus);}},{key:\"delCard\",value:function delCard(id){return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(id),{method:'DELETE',headers:this._headers}).then(this._checkStatus);}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(id,isLiked){if(!isLiked){return this.delLike(id);}else{return this.addlike(id);}}},{key:\"addlike\",value:function addlike(id){return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(id,\"/likes\"),{method:'PUT',headers:this._headers}).then(this._checkStatus);}},{key:\"delLike\",value:function delLike(id){return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(id,\"/likes\"),{method:'DELETE',headers:this._headers}).then(this._checkStatus);}}]);return Api;}();export var api=new Api({baseUrl:'https://mesto.nomoreparties.co/v1/cohort-41',headers:{authorization:'6be6d1f2-064d-406f-a1f7-f93c76457b36','Content-Type':'application/json'}});","map":{"version":3,"names":["Api","options","_baseUrl","baseUrl","_headers","headers","res","ok","json","Promise","reject","status","fetch","debugger","method","then","_checkStatus","all","getUserInfo","getInitialCards","data","body","JSON","stringify","name","about","link","avatar","id","isLiked","delLike","addlike","api","authorization"],"sources":["/Users/Vlad/dev/react-mesto-api-full/frontend/src/utils/Api.js"],"sourcesContent":["class Api {\n    constructor(options) {\n        this._baseUrl = options.baseUrl;\n        this._headers = options.headers;\n    }\n\n    _checkStatus(res) {\n        if (res.ok) {\n            return res.json()\n        } else {\n            return Promise.reject(`Error: ${res.status}`);\n        }\n    }\n\n    getUserInfo() {\n        return fetch (`${this._baseUrl}/users/me`, {\n            debugger: '',\n            method: 'GET',\n            headers: this._headers\n        })\n        .then(this._checkStatus)\n    }\n\n    getInitialCards() {\n        return fetch(`${this._baseUrl}/cards`, {\n            method: 'GET',\n            headers: this._headers,\n        })\n        .then((res => {\n            return this._checkStatus(res)\n        }))\n    }\n\n    getInitialInfo() {\n        return Promise.all([this.getUserInfo(), this.getInitialCards()])\n    }\n\n    setUserInfo(data) {\n        return fetch(`${this._baseUrl}/users/me`, {\n            method: 'PATCH',\n            headers: this._headers,\n            body: JSON.stringify({\n                name: data.name,\n                about: data.about\n            })\n        })\n        .then(this._checkStatus)\n    }\n\n    newUserAvatar(link) {\n        return fetch(`${this._baseUrl}/users/me/avatar`, {\n            method: 'PATCH',\n            headers: this._headers,\n            body: JSON.stringify({\n                avatar: link\n            })\n        })\n        .then(this._checkStatus)\n    }\n\n    addNewCard({ name, link }) {\n        return fetch(`${this._baseUrl}/cards`, {\n            method: 'POST',\n            headers: this._headers,\n            body: JSON.stringify({\n                name,\n                link\n                // name: data.title,\n                // link: data.url\n            })\n        })\n        .then(this._checkStatus)\n    }\n\n    delCard(id) {\n        return fetch(`${this._baseUrl}/cards/${id}`, {\n            method: 'DELETE',\n            headers: this._headers\n        })\n        .then(this._checkStatus)\n    }\n\n    changeLikeCardStatus(id, isLiked) {\n        if(!isLiked) {\n            return this.delLike(id);\n        }else {\n            return this.addlike(id);\n        }\n    }\n    \n    addlike(id) {\n        return fetch(`${this._baseUrl}/cards/${id}/likes`, {\n            method: 'PUT',\n            headers: this._headers\n        })\n        .then(this._checkStatus)\n    }\n\n    delLike(id) {\n        return fetch(`${this._baseUrl}/cards/${id}/likes`, {\n            method: 'DELETE',\n            headers: this._headers\n        })\n        .then(this._checkStatus)\n    }\n}\n\nexport const api = new Api({\n    baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-41',\n    headers: {\n        authorization: '6be6d1f2-064d-406f-a1f7-f93c76457b36',\n        'Content-Type': 'application/json'\n    }\n})"],"mappings":"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"},"metadata":{},"sourceType":"module"}